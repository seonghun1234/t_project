<th:block th:replace="usr/common/head"/>
<head>
    <title>TailsRoute</title>
    <link rel="stylesheet" href="/resource/css/article2.css"/>
</head>
<body>
<div class="tw-h-[60px]"></div>
<div class="tw-pb-[30px]">
<div class="tw-text-center tw-text-[50px] tw-p-[20px] tw-border-b-2 tw-border-[#DADADA] tw-max-w-[1440px] tw-mx-auto">
    게시글 목록
</div>
</div>
<div class="list_body">
    <div class="list_sidebar">
        <div class="list_profile">
            <div class="" th:if="${member == null}">
                <a class="list_profile_login button" href="../member/login" th:text="로그인"></a>
            </div>
            <div class="tw-flex tw-gap-[10px]" th:if="${member != null}">
                <img class="list_profile_dogPoto" th:if="${member.extra__dogPoto != null}"
                     th:src="@{${member.extra__dogPoto}}" alt="Profile Image"/>
                <img class="list_profile_dogPoto" th:if="${member.extra__dogPoto == null}"
                     th:src="@{/resource/photo/default.png}" alt="Default Profile Image"/>
                <div class="tw-flex tw-flex-col tw-items-center tw-justify-center">
                    <div class="list_profile_nickname" th:text="${member.nickname}"></div>
                    <a th:class="${memberId != 0 ? 'link tw-text-[#ff6f61]' : 'link'}" th:href="'../article/list?memberId='+${member.id}">내가 작성한 글 보기</a>
                </div>
            </div>
        </div>
        <div class="tw-w-full tw-pl-[50px]">
            <div class="list_board_title">🐕 즐거운 소통방</div>
            <div th:class="${boardId == 0 && memberId == 0 ? 'list_board tw-text-[#ff6f61]' : 'list_board'}">
                <a class="a" href="../article/list?boardId=0&page=1">전체 게시판</a>
            </div>
            <div th:class="${boardId == 1 && memberId == 0 ? 'list_board tw-text-[#ff6f61]' : 'list_board'}">
                <a class="a" href="../article/list?boardId=1&page=1">공지사항</a>
            </div>
            <div th:class="${boardId == 2 && memberId == 0 ? 'list_board tw-text-[#ff6f61]' : 'list_board'}">
                <a class="a" href="../article/list?boardId=2&page=1">자유게시판</a>
            </div>
            <div th:class="${boardId == 3 && memberId == 0 ? 'list_board tw-text-[#ff6f61]' : 'list_board'}">
                <a class="a" href="../article/list?boardId=3&page=1">Q & A</a>
            </div>
            <div th:class="${boardId == 4 && memberId == 0 ? 'list_board tw-text-[#ff6f61]' : 'list_board'}">
                <a class="a" href="../article/list?boardId=4&page=1">추천합니다</a>
            </div>
            <div th:class="${boardId == 5 && memberId == 0 ? 'list_board tw-text-[#ff6f61]' : 'list_board'}">
                <a class="a" href="../article/list?boardId=5&page=1">일상기록공유</a>
            </div>
        </div>
    </div>
    <div class="list_main">
        <div class="tw-flex tw-justify-between tw-items-center tw-pl-[80px] tw-pb-[20px]">
            <div th:if="${memberId != 0}" class="tw-flex tw-flex-col">
                <div class="tw-font-bold tw-text-4xl tw-pb-[20px]">
                    내가 작성한 글</div>
                <div>회원님이 작성한 게시글을 한눈에 확인할 수 있는 공간입니다. 나의 활동을 돌아보고 관리해보세요!</div>
            </div>
            <div th:if="${boardId == 0 && memberId == 0}" class="tw-flex tw-flex-col">
                <div class="tw-font-bold tw-text-4xl tw-pb-[20px]">
                    전체게시판</div>
                <div>모든 게시글을 한눈에 확인할 수 있는 공간입니다. 최신 소식과 다양한 주제를 만나보세요!</div>
            </div>
            <div th:if="${boardId == 1}" class="tw-flex tw-flex-col">
                <div class="tw-font-bold tw-text-4xl tw-pb-[20px]">공지사항</div>
                <div>중요한 소식과 공지사항을 확인하세요. 업데이트와 이벤트 정보가 여기에 게시됩니다.</div>
            </div>
            <div th:if="${boardId == 2}" class="tw-flex tw-flex-col">
                <div class="tw-font-bold tw-text-4xl tw-pb-[20px]">자유게시판</div>
                <div>우리 반려견의 일상과 고민을 나누는 공간, 자유롭게 소통하며 반려 생활을 함께 즐겨보세요!</div>
            </div>
            <div th:if="${boardId == 3}" class="tw-flex tw-flex-col">
                <div class="tw-font-bold tw-text-4xl tw-pb-[20px]">Q & A</div>
                <div>궁금한 점을 질문하고 답변을 공유하는 공간입니다. 서로 도와가며 지식을 나눠보세요!</div>
            </div>
            <div th:if="${boardId == 4}" class="tw-flex tw-flex-col">
                <div class="tw-font-bold tw-text-4xl tw-pb-[20px]">추천합니다</div>
                <div>다양한 제품을 소개하고 추천하는 공간입니다. 유용한 제품을 찾고 함께 공유해보세요!</div>
            </div>
            <div th:if="${boardId == 5}" class="tw-flex tw-flex-col">
                <div class="tw-font-bold tw-text-4xl tw-pb-[20px]">일상기록공유</div>
                <div>나의 일상과 특별한 순간들을 기록하고 공유하는 공간입니다. 소소한 일상의 이야기를 나눠보세요!</div>
            </div>
            <a class="link tw-pr-[100px]" th:href="@{../article/write}">작성하기</a>
        </div>
        <form th:action="@{../article/list}" class="tw-pl-[80px]">
            <div class="tw-flex tw-justify-between tw-items-center">
                <div class="tw-flex tw-gap-2">
                    <input type="hidden" name="boardId" th:value="${param.boardId != null ? param.boardId : 0}"/>
                    <select class="tw-h-[40px]" name="searchKeywordTypeCode">
                        <option th:value="${param.searchKeywordTypeCode != null ? param.searchKeywordTypeCode : '전체'}"
                                th:text="${param.searchKeywordTypeCode != null ? param.searchKeywordTypeCode : '전체'}"></option>
                        <option value="전체">전체</option>
                        <option value="제목">제목</option>
                        <option value="내용">내용</option>
                        <option value="작성자">작성자</option>
                    </select>
                    <label class="tw-flex tw-items-center tw-gap-2">
                        <input class="tw-pl-2" type="text" placeholder="검색어를 입력해주세요" name="searchKeyword"
                               th:value="${param.searchKeyword}"
                               style="height: 40px;"/>
                        <button type="submit" style="width: 30px; height: 30px;">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor"
                                 class="h-4 w-4 opacity-70">
                                <path fill-rule="evenodd"
                                      d="M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z"
                                      clip-rule="evenodd"/>
                            </svg>
                        </button>
                    </label>
                </div>
                <select class="str tw-border-box tw-p-2 tw-mr-[80px]" id="sortOrder" name="sortOrder"
                        th:onchange="|location.href='list?page=1&boardId='+${boardId}+'&sortOrder=' + this.value|">
                    <option th:value="${sortOrder}" th:text="${sortOrder == 'regDate' ? '최신순' :
                         sortOrder == 'title' ? '제목순' :
                         sortOrder == 'hitCount' ? '조회순' :
                         sortOrder == 'goodReactionPoint' ? '추천순' : '정렬'}">
                    </option>
                    <option th:if="${sortOrder != 'regDate'}" value="regDate">최신순</option>
                    <option th:if="${sortOrder != 'title'}" value="title">제목순</option>
                    <option th:if="${sortOrder != 'hitCount'}" value="hitCount">조회순</option>
                    <option th:if="${sortOrder != 'goodReactionPoint'}" value="goodReactionPoint">추천순</option>
                </select>
            </div>
        </form>
        <div class="tw-p-10">
            <!-- 게시글 목록이 있는 경우 -->
            <div class="tw-flex tw-items-center tw-w-full tw-p-5 underline" th:if="${articles != null}">
                <button class="tw-w-[50px] tw-text-center" th:text="게시판"></button>
                <button class="tw-flex-grow tw-text-center" th:text="제목"></button>
                <button class="tw-w-[130px]" th:text="작성자"></button>
                <button class="tw-w-[90px] tw-text-center" th:text="작성일"></button>
                <button class="tw-w-[50px] tw-text-center" th:text="조회"></button>
                <button class="tw-w-[50px] tw-text-center" th:text="추천"></button>
            </div>
            <div class="underline tw-flex tw-gap-5 tw-p-5" th:each="article : ${articles}" th:if="${articles != null}">
                <a class="tw-flex tw-items-center tw-w-full" th:href="@{'../article/detail?id=' + ${article.id}}">
                    <div class="tw-w-[50px] tw-text-center border" th:text="${article.boardId == 1 ? '공지' : article.boardId == 2 ? '자유' : article.boardId == 3 ? 'Q&A' : article.boardId == 4 ? '추천' : article.boardId == 5 ? '일상' : ''}"></div>
                    <div class="tw-flex-grow">
                        <span class="link tw-pl-5"
                              th:text="${#strings.abbreviate(article.title,30)}"></span>
                        <span th:text="' [ ' + ${article.extra__repliesCount} + ' ]'"
                              th:if="${article.extra__repliesCount} > 0"
                              style="color: red; font-weight: bold;"></span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 30 30" style="display: inline-block;" th:if="${article.articleCanNew}">
                            <circle cx="15" cy="15" r="12" fill="#ff6f61"/>
                            <text x="15" y="16" font-size="10" fill="white" font-family="Arial, sans-serif" text-anchor="middle" dominant-baseline="middle"> N </text>
                        </svg>
                    </div>
                    <div class="tw-w-[130px]" th:text="${article.extra__writer}"></div>
                    <div class="tw-w-[90px] tw-text-center" th:text="${article.regDate.substring(0, 10)}"></div>
                    <div class="tw-w-[50px] tw-text-center" th:text="${article.hitCount}"></div>
                    <div class="tw-w-[50px] tw-text-center" th:text="${article.goodReactionPoint}"></div>
                </a>
            </div>

            <!-- 게시글이 없는 경우 -->
            <div th:if="${articles.size() == 0}">
                <div class="tw-p-10" style="text-align: center;">게시글이 없습니다</div>
            </div>
        </div>
    </div>
</div>
<div class="tw-p-2" th:with="paginationLen=3, startPage=${page - paginationLen >= 1 ? page - paginationLen : 1},
      endPage=${page + paginationLen <= pagesCount ? page + paginationLen : pagesCount},
      baseUri='?boardId=' + (${param.boardId != null ? param.boardId : 0})
              + '&searchKeywordTypeCode=' + (${param.searchKeywordTypeCode != null ? param.searchKeywordTypeCode : '전체'})
              + '&searchKeyword=' + (${param.searchKeyword != null ? param.searchKeyword : ''})
              + '&memberId=' + (${param.memberId != null ? param.memberId : ''})"
     th:if="${articlesCount != 0}"
     style="display: flex; justify-content: center; align-items: center;">

    <!-- 처음 페이지로 이동 버튼 -->
    <div th:if="${startPage > 1}">
        <a class="tw-text-[30px] tw-pl-[10px] tw-pr-[10px]" th:href="@{${baseUri} + '&page=1'}">1</a>
    </div>
    <div th:if="${startPage > 2}">
        <button class="tw-text-[30px] tw-pl-[10px] tw-pr-[10px]">...</button>
    </div>

    <!-- 페이지 번호 반복 출력 -->
    <div th:each="i : ${#numbers.sequence(startPage, endPage)}">
        <a class="tw-text-[30px] tw-pl-[10px] tw-pr-[10px]"
           th:classappend="${page == i ? 'tw-bg-white tw-rounded-full' : ''}"
           th:href="@{${baseUri} + '&page=' + ${i}}" th:text="${i}"></a>
    </div>

    <!-- 마지막 페이지로 이동 버튼 -->
    <div th:if="${endPage < pagesCount - 1}">
        <button class="tw-text-[30px] tw-pl-[10px] tw-pr-[10px]">...</button>
    </div>
    <div th:if="${endPage < pagesCount && pagesCount != 0}">
        <a class="tw-text-[30px] tw-pl-[10px] tw-pr-[10px]"
           th:href="@{${baseUri} + '&page=' + ${pagesCount}}"
           th:text="${pagesCount}"></a>
    </div>
</div>
</body>
<th:block th:replace="usr/common/mouseEffect"/>